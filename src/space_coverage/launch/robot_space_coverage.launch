<?xml version="1.0"?>
<launch>
  <master auto="start"/>

  <!-- <arg name="node_start_delay" default="15.0" />  
  <node name="listener" pkg="roscpp_tutorials" type="listener" launch-prefix="bash -c 'sleep $(arg node_start_delay); $0 $@' " /> -->

  <!-- Robot Model -->
  <arg name="model" default="$(find p3dx_description)/urdf/pioneer3dx.xml"/>
  <param name="robot_description" textfile="$(arg model)" />

  <!-- Robot Drivers -->
  <include file="$(find robot)/launch/robot.launch"/>

  <!-- Map Server -->
  <node pkg="map_server" type="map_server" name="map_server"
	  args="$(find space_coverage)/world/Stage/lab1/lab1.yaml" respawn="false" launch-prefix="bash -c 'sleep 6; $0 $@' "/>

  <!-- Rviz -->
  <node type="rviz" name="rviz" pkg="rviz" args="-d $(find space_coverage)/world/rviz/small_building_slam.rviz" launch-prefix="bash -c 'sleep 6.5; $0 $@' "/>

  <!-- AMCL -->
  <include file="$(find space_coverage)/Modules/amcl.launch">
    <arg name="node_start_delay" value="7"/>
    <arg name="initial_pose_x" value="0.98"/>
    <arg name="initial_pose_y" value="9.676777508879683"/>
    <arg name="initial_pose_a" value="-1.57"/>
  </include>

  <!-- Move_Base -->
  <include file="$(find space_coverage)/Modules/move_base/move_base.launch">
    <arg name="node_start_delay" value="7.5"/>
  </include>

  <!-- Space_Coverage_Planner -->
  <node name="space_coverage_planner" pkg="space_coverage" type="space_coverage_node" respawn="false" output="screen" launch-prefix="bash -c 'sleep 10; $0 $@' ">
    <param name="x_offset" value="-1"/>
    <param name="y_offset" value="-1"/>
    <param name="goal_dist" value="0.95"/>
    <param name="cell_size" value="0.6"/>
  </node>

</launch>
